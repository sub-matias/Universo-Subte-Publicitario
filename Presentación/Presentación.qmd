---
title: "Universo Subte Publicitario"
subtitle: "Modelos de clasificaci√≥n crom√°tica: enfoques asistidos por inteligencia artificial"
author: "Mat√≠as Salto, Aleksander Dietrichson"
date: Nov. 09/2022
format: revealjs
editor: visual
---

## üöáIntroducci√≥n

```{r}
#| include: false
library(tidyverse) #Manipulaci√≥n de datos y gr√°ficos
library(googledrive) #Acceso al ecosistema de Google
library(googlesheets4) #Acceso a la base de datos
my_files <- dir("R",full.names = TRUE)
for(archivo in my_files){
  source(archivo)
  cat("Procesando:", archivo, "\n")
}
```

### Estudios de la comunicaci√≥n en tr√°nsito y en tiempos de espera

-   El mundo de los mensajes publicitarios en el Subte de la Ciudad de Buenos Aires

-   An√°lisis cuantitativo de los colores de las publicidades gr√°ficas

    -   El uso de software estad√≠stico R: entorno de trabajo, acceso y manipulaci√≥n de datos, an√°lisis y representaciones gr√°ficas.

## 1Ô∏è‚É£ Librer√≠as

-   Herramientas de trabajo:

    1.  Librer√≠as y paquetes {tidyverse} {magick} y {googledrive}
    2.  Funciones creadas para el an√°lisis de los colores

## 2Ô∏è‚É£ Base de datos: prueba piloto

Naturaleza de las publicidades gr√°ficas analizadas:

1.  Fotograf√≠as de viajes personales en el Subte L√≠nea B (2018 - 2022)
2.  Publicidades de acceso p√∫blico, fuentes nacionales e internacionales:
    -   Presentes en todas las L√≠neas de Subte

    -   Selecci√≥n intermitente de los √∫ltimos 21 a√±os (2001 - 2022)
3.  Filtro de selecci√≥n: representaci√≥n del tiempo social y las formas de vida en la Ciudad de Buenos Aires

## 3Ô∏è‚É£ Elaboraci√≥n de funciones y gr√°ficos

### La organizaci√≥n del caos que produce el an√°lisis cuantitativo

-   Funciones creadas para el estudio de los colores de las publicidades y el acceso a datos factibles de an√°lisis:
    -   C√≥digos HEX

    -   Valores RGB

```{r}
#| include: false
#Acceso a los archivos locales
my_data <- read_rds("tmp/file_info.rds")
```

## üìä Analizar foto

Acceso a los colores: La necesidad de manipular y transformar los datos y la creaci√≥n de data frames basados en teor√≠a RGB

```{r}
AD_FibertelM36 <- image_read("tmp/Subte B_2004_Fibertel---Vas-M√°s-R√°pido.jpg")
plot(AD_FibertelM36)
```

## üìä Fibertel Subte*pass*: teor√≠a HEX

#### Primera aproximaci√≥n

```{r}
#| echo: false
AD_FibertelM36 <- "tmp/Subte B_2004_Fibertel---Vas-M√°s-R√°pido.jpg"
analizar_foto(AD_FibertelM36)
```

#### Caos inicial

```{r}
tmp1_AF_Fibertel <- image_read("tmp/Subte B_2004_Fibertel---Vas-M√°s-R√°pido.jpg")
tmp1_AF_Fibertel
as.raster(tmp1_AF_Fibertel) %>% head(5)
```

## üìä Fibertel Subte*pass*: organizaci√≥n HEX

#### B√∫squeda de los HEX predominantes en el caos

```{r}
#| echo: false
tmp1_AF_Fibertel %>%
  as.raster() %>%
  as.matrix() %>%
  as.vector() %>%
  head()
```

```{r}
#| echo: false
mis_colores <- tmp1_AF_Fibertel %>% 
  as.raster() %>% 
  as.matrix() %>% 
  as.vector() 
```

#### Deconstrucci√≥n de los HEXs en columnas

```{r}
#| echo: false
my_data_AF_Fibertel <- data.frame(
  R = str_sub(mis_colores,2,3),
  G = str_sub(mis_colores,4,5),
  B = str_sub(mis_colores,6,7),
  A = str_sub(mis_colores,8,9)
)

my_data_AF_Fibertel  %>% head(15)
```

## üìä Fibertel Subte*pass*: algoritmo y HEXs dominantes

```{r}
#| echo: false
my_data_AF_Fibertel %>% 
  mutate(
    Red = stringr::str_sub(R,1,1) %>% stringr::str_c("0"),
    Green = stringr::str_sub(G,1,1) %>% stringr::str_c("0"),
    Blue = stringr::str_sub(B,1,1) %>% stringr::str_c("0"),
    Alpha = stringr::str_sub(A,1,1) %>% stringr::str_c("0")
      ) -> my_data_AF_Fibertel

my_data_AF_Fibertel <- my_data_AF_Fibertel %>% 
  mutate(color_nuevo = paste0("#",Red,Green,Blue))

my_data_AF_Fibertel %>% 
  group_by(color_nuevo) %>% 
  tally(sort=TRUE) %>% 
  head(30) -> tmp

tmp %>% 
  ggplot(aes(color_nuevo,n))+
  geom_col(fill = tmp$color_nuevo)
```

## üìä Visualizar RGB

-   Lectura de los valores RGB de forma a√≠slada

```{r}
#| echo: false
ADs <- read_rds("tmp/file_info.rds")
AD_Actron <- paste0("tmp/",ADs$filename[22])

colores_barchart(AD_Actron)
AD_Actron <- magick::image_read(AD_Actron)
plot(AD_Actron)
```
